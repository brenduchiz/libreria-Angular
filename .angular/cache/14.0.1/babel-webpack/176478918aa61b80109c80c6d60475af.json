{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/auth/auth.service\";\nimport * as i3 from \"src/app/services/users/users.service\";\nimport * as i4 from \"src/app/services/token/token.service\";\nimport * as i5 from \"src/app/private/users/users-list.component\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/input\";\nimport * as i9 from \"@angular/forms\";\nimport * as i10 from \"@angular/material/card\";\n\nfunction LoginComponentComponent_mat_error_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" No es un correo v\\u00E1lido \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponentComponent_mat_error_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Email es requerido \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LoginComponentComponent_mat_error_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" La contrase\\u00F1a no es valida \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class LoginComponentComponent {\n  constructor(router, authService, userService, tokenService, usersListComponent) {\n    this.router = router;\n    this.authService = authService;\n    this.userService = userService;\n    this.tokenService = tokenService;\n    this.usersListComponent = usersListComponent;\n    this.token = '';\n    this.loginForm = new FormGroup({\n      email: new FormControl('', [Validators.required, Validators.email]),\n      password: new FormControl('', [Validators.required])\n    });\n  }\n\n  ngOnInit() {}\n\n  getoPrivate() {\n    this.router.navigate(['/app']);\n  }\n\n  login() {\n    if (!this.loginForm.valid) return;\n    this.authService.authenticate(this.loginForm.value).subscribe(response => {\n      localStorage.setItem('token', response.data.token);\n    });\n    this.getoPrivate();\n    this.users();\n  }\n  /*   async login() {\r\n      if (!this.loginForm.valid) return;\r\n      const res = await this.authService.authenticate(this.loginForm.value);\r\n      this.getoPrivate()\r\n      this.token = res.data.token\r\n      this.users(this.token)\r\n    } */\n\n\n  users() {}\n\n}\n\nLoginComponentComponent.ɵfac = function LoginComponentComponent_Factory(t) {\n  return new (t || LoginComponentComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.UsersService), i0.ɵɵdirectiveInject(i4.TokenService), i0.ɵɵdirectiveInject(i5.UsersListComponent));\n};\n\nLoginComponentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponentComponent,\n  selectors: [[\"app-login-component\"]],\n  decls: 18,\n  vars: 4,\n  consts: [[3, \"formGroup\", \"submit\"], [\"fxLayoutAlign\", \"center center\", 1, \"text-center\", \"mt-3\"], [\"appearance\", \"fill\", 1, \"example-form-field\"], [\"matInput\", \"\", \"formControlName\", \"email\", \"placeholder\", \"email\", \"type\", \"email\"], [4, \"ngIf\"], [\"matInput\", \"\", \"type\", \"password\", \"formControlName\", \"password\", \"placeholder\", \"contrase\\u00F1a\"], [1, \"mx-auto\"], [1, \"btn\", \"button-color-card\", \"mt-4\", \"btn-lg\"]],\n  template: function LoginComponentComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0);\n      i0.ɵɵlistener(\"submit\", function LoginComponentComponent_Template_form_submit_0_listener() {\n        return ctx.login();\n      });\n      i0.ɵɵelementStart(1, \"mat-card\", 1)(2, \"div\")(3, \"mat-form-field\", 2)(4, \"mat-label\");\n      i0.ɵɵtext(5, \"E-mail\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(6, \"input\", 3);\n      i0.ɵɵtemplate(7, LoginComponentComponent_mat_error_7_Template, 2, 0, \"mat-error\", 4);\n      i0.ɵɵtemplate(8, LoginComponentComponent_mat_error_8_Template, 2, 0, \"mat-error\", 4);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(9, \"div\")(10, \"mat-form-field\", 2)(11, \"mat-label\");\n      i0.ɵɵtext(12, \"Password\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(13, \"input\", 5);\n      i0.ɵɵtemplate(14, LoginComponentComponent_mat_error_14_Template, 2, 0, \"mat-error\", 4);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(15, \"div\", 6)(16, \"button\", 7);\n      i0.ɵɵtext(17, \" Log in \");\n      i0.ɵɵelementEnd()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", ctx.loginForm.controls[\"email\"].hasError(\"email\") || false);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.loginForm.controls[\"email\"].hasError(\"required\") || false);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.loginForm.controls[\"password\"].errors);\n    }\n  },\n  dependencies: [i6.NgIf, i7.MatError, i7.MatFormField, i7.MatLabel, i8.MatInput, i9.ɵNgNoValidate, i9.DefaultValueAccessor, i9.NgControlStatus, i9.NgControlStatusGroup, i9.FormGroupDirective, i9.FormControlName, i10.MatCard],\n  styles: [\".card-container[_ngcontent-%COMP%] {\\n  display: grid;\\n  margin-top: 90px;\\n  gap: 2rem;\\n  grid-template-columns: repeat(auto-fill, minmax(21rem, 1fr));\\n}\\n\\n.button-color-card[_ngcontent-%COMP%] {\\n  background-color: #12f848;\\n}\\n\\nmat-card[_ngcontent-%COMP%] {\\n  background: #db79c6;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLWNvbXBvbmVudC5jb21wb25lbnQuc2NzcyIsIi4uXFwuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFxBbmd1bGFyLSUyMGNvdXJzZVxcdGVtYTNcXGxpYnJlcmlhXFxzcmNcXGFwcFxccHVibGljXFxsb2dpblxcbG9naW4tY29tcG9uZW50LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksYUFBQTtFQUNBLGdCQUFBO0VBQ0EsU0FBQTtFQUVBLDREQUFBO0FDQUo7O0FESUE7RUFDSSx5QkFBQTtBQ0RKOztBREtBO0VBQ0ksbUJBQUE7QUNGSiIsImZpbGUiOiJsb2dpbi1jb21wb25lbnQuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY2FyZC1jb250YWluZXJ7XHJcbiAgICBkaXNwbGF5OmdyaWQ7XHJcbiAgICBtYXJnaW4tdG9wOiA5MHB4O1xyXG4gICAgZ2FwOiAycmVtO1xyXG4gICAgXHJcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgyMXJlbSwgMWZyKSk7XHJcbiAgXHJcbn1cclxuXHJcbi5idXR0b24tY29sb3ItY2FyZCB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTJmODQ4IDtcclxufVxyXG5cclxuXHJcbm1hdC1jYXJke1xyXG4gICAgYmFja2dyb3VuZDogI2RiNzljNiA7XHJcbn0iLCIuY2FyZC1jb250YWluZXIge1xuICBkaXNwbGF5OiBncmlkO1xuICBtYXJnaW4tdG9wOiA5MHB4O1xuICBnYXA6IDJyZW07XG4gIGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDIxcmVtLCAxZnIpKTtcbn1cblxuLmJ1dHRvbi1jb2xvci1jYXJkIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzEyZjg0ODtcbn1cblxubWF0LWNhcmQge1xuICBiYWNrZ3JvdW5kOiAjZGI3OWM2O1xufSJdfQ== */\"]\n});","map":{"version":3,"mappings":"AACA,SAASA,WAAT,EAAsBC,SAAtB,EAAiCC,UAAjC,QAAmD,gBAAnD;;;;;;;;;;;;;;;ICOYC;IACIA;IACJA;;;;;;IACAA;IACIA;IACJA;;;;;;IAOAA;IACIA;IACJA;;;;ADLZ,OAAM,MAAOC,uBAAP,CAA8B;EAWlCC,YAAoBC,MAApB,EAA4CC,WAA5C,EAA8EC,WAA9E,EAAiHC,YAAjH,EAAqJC,kBAArJ,EAA2L;IAAvK;IAAwB;IAAkC;IAAmC;IAAoC;IAV9I,aAAgB,EAAhB;IAKA,iBAAY,IAAIT,SAAJ,CAAc;MAC/BU,KAAK,EAAE,IAAIX,WAAJ,CAAgB,EAAhB,EAAoB,CAACE,UAAU,CAACU,QAAZ,EAAsBV,UAAU,CAACS,KAAjC,CAApB,CADwB;MAE/BE,QAAQ,EAAE,IAAIb,WAAJ,CAAgB,EAAhB,EAAoB,CAACE,UAAU,CAACU,QAAZ,CAApB;IAFqB,CAAd,CAAZ;EAKyL;;EAEhME,QAAQ,IACP;;EACDC,WAAW;IACT,KAAKT,MAAL,CAAYU,QAAZ,CAAqB,CAAC,MAAD,CAArB;EACD;;EAEDC,KAAK;IACH,IAAI,CAAC,KAAKC,SAAL,CAAeC,KAApB,EAA2B;IAC3B,KAAKZ,WAAL,CAAiBa,YAAjB,CAA8B,KAAKF,SAAL,CAAeG,KAA7C,EACGC,SADH,CACaC,QAAQ,IAAG;MACpBC,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,QAAQ,CAACG,IAAT,CAAcC,KAA5C;IACD,CAHH;IAKA,KAAKZ,WAAL;IACA,KAAKa,KAAL;EACD;EAID;;;;;;;;;EAQAA,KAAK,IAEJ;;AA1CiC;;;mBAAvBxB,yBAAuBD;AAAA;;;QAAvBC;EAAuByB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MChBpC9B;MAA8BA;QAAA,OAAU+B,WAAV;MAAiB,CAAjB;MAC1B/B,oCAAiE,CAAjE,EAAiE,KAAjE,EAAiE,CAAjE,EAAiE,gBAAjE,EAAiE,CAAjE,EAAiE,CAAjE,EAAiE,WAAjE;MAImBA;MAAMA;MACjBA;MACAA;MAGAA;MAGJA;MAEJA,4BAAK,EAAL,EAAK,gBAAL,EAAK,CAAL,EAAK,EAAL,EAAK,WAAL;MAEmBA;MAAQA;MACnBA;MACAA;MAGFA;MAENA,gCAAqB,EAArB,EAAqB,QAArB,EAAqB,CAArB;MAEIA;MACNA;;;;MA3BIA;MAOkBA;MAAAA;MAGAA;MAAAA;MASAA;MAAAA","names":["FormControl","FormGroup","Validators","i0","LoginComponentComponent","constructor","router","authService","userService","tokenService","usersListComponent","email","required","password","ngOnInit","getoPrivate","navigate","login","loginForm","valid","authenticate","value","subscribe","response","localStorage","setItem","data","token","users","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\brmorales.STFMXC1451\\Documents\\Angular- course\\tema3\\libreria\\src\\app\\public\\login\\login-component.component.ts","C:\\Users\\brmorales.STFMXC1451\\Documents\\Angular- course\\tema3\\libreria\\src\\app\\public\\login\\login-component.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { switchMap } from 'rxjs';\nimport { Users } from 'src/app/Interfaces/users';\nimport { AuthService } from 'src/app/services/auth/auth.service';\nimport { UsersService } from 'src/app/services/users/users.service';\n\nimport { tap } from 'rxjs';\nimport { TokenService } from 'src/app/services/token/token.service';\nimport { UsersListComponent } from 'src/app/private/users/users-list.component';\n\n@Component({\n  selector: 'app-login-component',\n  templateUrl: './login-component.component.html',\n  styleUrls: ['./login-component.component.scss']\n})\nexport class LoginComponentComponent implements OnInit {\n  public token: string = '';\n  public usersProfile: Users[] | undefined;\n\n\n\n  public loginForm = new FormGroup({\n    email: new FormControl('', [Validators.required, Validators.email]),\n    password: new FormControl('', [Validators.required])\n  })\n\n  constructor(private router: Router, private authService: AuthService, private userService: UsersService, private tokenService: TokenService, private usersListComponent: UsersListComponent) { }\n\n  ngOnInit(): void {\n  }\n  getoPrivate() {\n    this.router.navigate(['/app'])\n  }\n\n  login() {\n    if (!this.loginForm.valid) return;\n    this.authService.authenticate(this.loginForm.value)\n      .subscribe(response => {\n        localStorage.setItem('token', response.data.token)\n      });\n\n    this.getoPrivate()\n    this.users()\n  }\n\n\n\n  /*   async login() {\n      if (!this.loginForm.valid) return;\n      const res = await this.authService.authenticate(this.loginForm.value);\n      this.getoPrivate()\n      this.token = res.data.token\n      this.users(this.token)\n    } */\n\n  users() {\n\n  }\n  /* users(token: string) {\n    this.userService.getUsers(token)\n      .subscribe(user => {\n\n\n        this.usersProfile = user.data\n      });\n  } */\n}\n","\n<form [formGroup]=\"loginForm\" (submit)=\"login()\">\n    <mat-card class=\"text-center mt-3\" fxLayoutAlign=\"center center\"> \n       \n    <div>\n        <mat-form-field class=\"example-form-field\" appearance=\"fill\">    \n            <mat-label>E-mail</mat-label>\n            <input matInput  formControlName=\"email\" placeholder=\"email\" type=\"email\" >\n            <mat-error *ngIf=\"loginForm.controls['email'].hasError('email') || false \" >\n                No es un correo válido\n            </mat-error>\n            <mat-error *ngIf=\"loginForm.controls['email'].hasError('required') || false \" >\n                Email es requerido\n            </mat-error>\n        </mat-form-field>\n    </div>\n    <div>\n        <mat-form-field class=\"example-form-field\" appearance=\"fill\">\n            <mat-label>Password</mat-label>\n            <input matInput  type=\"password\" formControlName=\"password\" placeholder=\"contraseña\">\n            <mat-error *ngIf=\"loginForm.controls['password'].errors\" >\n                La contraseña no es valida\n            </mat-error>\n          </mat-form-field>\n    </div>\n    <div class=\"mx-auto\">\n    <button class=\"btn button-color-card mt-4  btn-lg\" >\n        Log in\n  </button>\n    </div>\n</mat-card>\n</form>\n"]},"metadata":{},"sourceType":"module"}